{"version":3,"file":"li-log.min.js","sources":["../src/lib/utils.js","../src/lib/li-log-core.js"],"sourcesContent":["function copyDeep(baseObj) {\n    function cloneObject(obj) {\n        const clone = {};\n        const objKeys = Object.keys(obj);\n        let i = objKeys.length;\n\n        while (i) {\n            const key = objKeys[i];\n\n            if (typeof (obj[key]) === 'object' && obj[key] !== null) {\n                clone[key] = cloneObject(obj[key]);\n            } else {\n                clone[key] = obj[key];\n            }\n\n            i -= 1;\n        }\n\n        return clone;\n    }\n\n    const newObj = {};\n    const keys = Object.keys(baseObj);\n\n    let j = keys.length;\n\n    while (j) {\n        const key = keys[j];\n        const current = baseObj[key];\n\n        if (Array.isArray(current)) {\n            newObj[key] = current.slice(0);\n        } else if (typeof current === 'object') {\n            newObj[key] = cloneObject(current);\n        } else {\n            newObj[key] = current;\n        }\n\n        j -= 1;\n    }\n\n    return newObj;\n}\n\nfunction mergeOptions(baseOptions, userOptions) {\n    const resultOptions = copyDeep(baseOptions);\n    const keys = Object.keys(userOptions);\n\n    let i = keys.length;\n\n    while (i) {\n        const key = keys[i];\n\n        resultOptions[key] = userOptions[key];\n\n        i -= 1;\n    }\n\n    return resultOptions;\n}\n\nconst isBrowser = (() => {\n    try {\n        return Boolean(window);\n    } catch (e) {\n        return false;\n    }\n})();\nconst isNode = (() => {\n    try {\n        return Boolean(global);\n    } catch (e) {\n        return false;\n    }\n})();\n\nfunction getTime() {\n    const date = new Date();\n    const hours = pad(date.getHours());\n    const minutes = pad(date.getMinutes());\n    const seconds = pad(date.getSeconds());\n\n    return `${hours}:${minutes}:${seconds}`;\n}\n\nfunction pad(val) {\n    const length = 2;\n    let value = String(val);\n\n    while (value.length < length) {\n        value = '0' + val;\n    }\n    return value;\n}\n\nconst utils = {\n    mergeOptions,\n    isBrowser,\n    isNode,\n    getTime,\n};\n\nexport default utils;\n","import DateTimeFormat from 'format-date-time';\r\nimport utils from './utils';\r\n\r\n// default browser text styles\r\nconst browserConsoleStyles = {\r\n    debug: 'font-browserStyle: italic; color: #1B2B34;',\r\n    info: 'color: #6699CC;',\r\n    warning: 'font-weight: bold; color: #AB7967;',\r\n    error: 'font-weight: bold; color: #E24825;',\r\n    critical: 'font-weight: bold; color: #FAFAFA; padding: 3px; background: linear-gradient(#D33106, #571402);',\r\n};\r\n\r\nfunction Log(userOptions) {\r\n    const { isBrowser, isNode, mergeOptions } = utils;\r\n    let dateTimeFormatter;\r\n    if (isNode) {\r\n        dateTimeFormatter = new DateTimeFormat('HH:mm:ss');\r\n    }\r\n    const baseOptions = {\r\n        level: 1, // info as default\r\n        coloredOutput: true,\r\n        logMethods: [\r\n            {\r\n                name: 'debug',\r\n                level: 0,\r\n                browserStyle: browserConsoleStyles.debug,\r\n            },\r\n            {\r\n                name: 'info',\r\n                level: 1,\r\n                browserStyle: browserConsoleStyles.info,\r\n            },\r\n            {\r\n                name: 'warning',\r\n                level: 2,\r\n                browserStyle: browserConsoleStyles.warning,\r\n            },\r\n            {\r\n                name: 'error',\r\n                level: 3,\r\n                browserStyle: browserConsoleStyles.error,\r\n            },\r\n            {\r\n                name: 'critical',\r\n                level: 4,\r\n                browserStyle: browserConsoleStyles.critical,\r\n            },\r\n        ],\r\n        transport: [\r\n            function finalLog(data) {\r\n                if (isBrowser) {\r\n                    if (baseOptions.coloredOutput) {\r\n                        console.log(data.message, data.browserStyle);\r\n                    } else {\r\n                        console.log(data.message);\r\n                    }\r\n                } else {\r\n                    console.log(data.message);\r\n                }\r\n            },\r\n        ],\r\n    };\r\n\r\n    let options = baseOptions;\r\n    let loggerDisabled = false;\r\n\r\n    if (typeof userOptions === 'object') {\r\n        options = mergeOptions(baseOptions, userOptions);\r\n    } else if (typeof userOptions === 'string' && userOptions === 'no-color') {\r\n        baseOptions.coloredOutput = false;\r\n    }\r\n\r\n    function log(logOptions, methodInfo, args) {\r\n        if (loggerDisabled || methodInfo.level < logOptions.level) return;\r\n\r\n        let message;\r\n\r\n        if (isNode) {\r\n            message = `${dateTimeFormatter.now()} <${methodInfo.name}> ${args}`;\r\n        } else {\r\n            message = `${utils.getTime()} <${methodInfo.name}> ${args}`;\r\n        }\r\n\r\n\r\n        if (logOptions.coloredOutput) {\r\n            if (isBrowser) {\r\n                message = `%c${message}`;\r\n            } else if (isNode) {\r\n                message = `${message}`;\r\n            }\r\n        }\r\n\r\n        const data = {\r\n            message,\r\n            browserStyle: methodInfo.browserStyle,\r\n            nodeStyle: methodInfo.nodeStyle,\r\n        };\r\n\r\n        logOptions.transport.forEach((fn) => {\r\n            if (typeof fn === 'function') {\r\n                fn(data);\r\n            } else {\r\n                throw new Error('Transport item not a function');\r\n            }\r\n        });\r\n    }\r\n\r\n    options.logMethods.forEach((methodInfo) => {\r\n        if (methodInfo.level >= options.level) {\r\n            this[methodInfo.name] = (...args) => log(options, methodInfo, args);\r\n        } else {\r\n            this[methodInfo.name] = () => {};\r\n        }\r\n    });\r\n\r\n    this.setLevel = (level) => {\r\n        if (Number.isInteger(level)) {\r\n            options.level = level;\r\n        } else if (typeof level === 'string') {\r\n            const methods = options.logMethods.filter(method => method.name === level);\r\n            if (Array.isArray(methods) && methods.length) {\r\n                options.level = methods[0].level;\r\n            }\r\n        } else {\r\n            console.log(`setLevel() level ${level} was not found in LiLog instance`);\r\n        }\r\n    };\r\n\r\n    this.disable = () => {\r\n        loggerDisabled = true;\r\n    };\r\n}\r\n\r\nexport { Log as default };\r\n"],"names":["clone","objKeys","Object","keys","i","length","key","babelHelpers.typeof","obj","cloneObject","newObj","j","current","baseObj","Array","isArray","slice","value","isBrowser","window","isNode","global","utils","resultOptions","copyDeep","userOptions","date","Date","hours","pad","getHours","minutes","getMinutes","seconds","getSeconds","browserConsoleStyles","loggerDisabled","methodInfo","level","logOptions","message","dateTimeFormatter","now","name","getTime","coloredOutput","data","browserStyle","nodeStyle","transport","forEach","Error","mergeOptions","baseOptions","debug","info","warning","error","critical","log","options","logMethods","args","setLevel","Number","isInteger","methods","filter","method","disable"],"mappings":"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"}